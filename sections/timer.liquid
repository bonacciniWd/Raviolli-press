{% comment %}
Countdown funcional configurável no editor Shopify.
Com fundo gradiente animado e texto com brilho pulsante.
{% endcomment %}

<section id="countdown-section" class="countdown-container">
  <div class="container">
    <div class="time-box box-1">
      <span id="days">00</span>
      <small>Dia</small>
    </div>
    <div class="time-box box-2">
      <span id="hours">00</span>
      <small>Horas</small>
    </div>
    <div class="time-box box-3">
      <span id="minutes">00</span>
      <small>Minutos</small>
    </div>
    <div class="time-box box-4">
      <span id="seconds">00</span>
      <small>Segundos</small>
    </div>
  </div>
</section>

<style>
.countdown-container {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 60px 0;
  background: radial-gradient(circle at center, #111 0%, #000 100%);
  color: #fff;
  font-family: Helvetica, Arial, sans-serif;
  min-height: 100vh;
}

.countdown-container .container {
  display: flex;
  flex-wrap: wrap;
  gap: 25px;
}

.time-box {
  text-align: center;
}

.time-box span {
  display: block;
  font-size: 64px;
  font-weight: bold;
  padding: 20px 40px;
  border-radius: 10px;
  position: relative;
  z-index: 1;
  overflow: hidden;
  color: #fff;
  animation: glow 2s ease-in-out infinite;
}

.time-box small {
  display: block;
  margin-top: 10px;
  font-size: 14px;
  color: #ccc;
}

/* ==== FUNDO GRADIENTE ANIMADO ==== */
.time-box span::before {
  content: "";
  position: absolute;
  inset: 0;
  z-index: -1;
  background: linear-gradient(var(--angle), var(--color1), var(--color2), var(--color3));
  animation: spin 4s linear infinite;
  border-radius: inherit;
  filter: blur(0);
}

/* ==== VARIAÇÕES POR BLOCO ==== */
.box-1 span { --color1: #ff7eb3; --color2: #ff758c; --color3: #ff5f6d; }
.box-2 span { --color1: #3cba92; --color2: #0ba360; --color3: #2e8b57; }
.box-3 span { --color1: #5ddcff; --color2: #3c67e3; --color3: #4e00c2; }
.box-4 span { --color1: #f6d365; --color2: #fda085; --color3: #f48c06; }

/* ==== ANIMAÇÕES ==== */
@keyframes spin {
  0% { --angle: 0deg; }
  100% { --angle: 360deg; }
}

@keyframes glow {
  0% {
    text-shadow: 0 0 5px rgba(255,255,255,0.2), 0 0 10px rgba(255,255,255,0.3);
  }
  50% {
    text-shadow: 0 0 20px rgba(255,255,255,0.8), 0 0 40px rgba(255,255,255,1);
  }
  100% {
    text-shadow: 0 0 5px rgba(255,255,255,0.2), 0 0 10px rgba(255,255,255,0.3);
  }
}

/* ==== RESPONSIVO ==== */
@media (max-width: 768px) {
  .time-box span {
    font-size: 40px;
    padding: 15px 25px;
  }
}
</style>

<script>
document.addEventListener("DOMContentLoaded", function() {
  const targetDate = "{{ section.settings.target_date }}";
  const targetTime = "{{ section.settings.target_time }}";
  const target = new Date(`${targetDate}T${targetTime}:00`);

  const daysEl = document.getElementById("days");
  const hoursEl = document.getElementById("hours");
  const minutesEl = document.getElementById("minutes");
  const secondsEl = document.getElementById("seconds");

  function updateCountdown() {
    const now = new Date().getTime();
    const distance = target.getTime() - now;

    if (distance <= 0) {
      daysEl.textContent = "00";
      hoursEl.textContent = "00";
      minutesEl.textContent = "00";
      secondsEl.textContent = "00";
      return;
    }

    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
    const hours = Math.floor((distance / (1000 * 60 * 60)) % 24);
    const minutes = Math.floor((distance / (1000 * 60)) % 60);
    const seconds = Math.floor((distance / 1000) % 60);

    daysEl.textContent = String(days).padStart(2, "0");
    hoursEl.textContent = String(hours).padStart(2, "0");
    minutesEl.textContent = String(minutes).padStart(2, "0");
    secondsEl.textContent = String(seconds).padStart(2, "0");
  }

  updateCountdown();
  setInterval(updateCountdown, 1000);
});
</script>

{% schema %}
{
  "name": "Countdown Timer",
  "settings": [
    {
      "type": "header",
      "content": "Configurações do Countdown"
    },
    {
      "type": "text",
      "id": "target_date",
      "label": "Data final (AAAA-MM-DD)",
      "default": "2025-11-08"
    },
    {
      "type": "text",
      "id": "target_time",
      "label": "Hora final (HH:MM no formato 24h)",
      "default": "15:00"
    }
  ],
  "presets": [
    {
      "name": "Countdown Timer"
    }
  ]
}
{% endschema %}
