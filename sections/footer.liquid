<script src="{{ 'bubble.js' | asset_url }}" defer></script>

<section id="section-{{ section.id }}" class="raviolli-footer" data-section-id="{{ section.id }}">
  <div class="bubbles"></div>

  <div class="content">
    <!-- conteÃºdo do footer -->
  </div>

  <svg style="position:fixed; top:100vh">
    <defs>
      <filter id="blob">
        <feGaussianBlur in="SourceGraphic" stdDeviation="10" result="blur" />
        <feColorMatrix in="blur" mode="matrix" 
          values="1 0 0 0 0  
                  0 1 0 0 0  
                  0 0 1 0 0  
                  0 0 0 19 -9" result="blob" />
      </filter>
    </defs>
  </svg>
</section>

{% style %}
  .raviolli-footer {
    position: relative;
    min-height: 12rem;
    --footer-background: #ed5565;
  }

  .raviolli-footer .bubbles {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1rem;
    background: var(--footer-background);
    filter: url("#blob");
  }

  .raviolli-footer .bubble {
    position: absolute;
    left: var(--position, 50%);
    background: var(--footer-background);
    border-radius: 100%;
    transform: translate(-50%, 100%);
    animation:
      bubble-size var(--time, 4s) ease-in infinite var(--delay, 0s),
      bubble-move var(--time, 4s) ease-in infinite var(--delay, 0s);
  }

  @keyframes bubble-size {
    0%, 75% { width: var(--size, 4rem); height: var(--size, 4rem); }
    100% { width: 0rem; height: 0rem; }
  }

  @keyframes bubble-move {
    0% { bottom: -4rem; }
    100% { bottom: var(--distance, 10rem); }
  }

  .raviolli-footer .content {
    z-index: 2;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 2rem;
    background: var(--footer-background);
  }
{% endstyle %}

{% schema %}
{
  "name": "Raviolli Footer",
  "settings": [],
  "presets": [{ "name": "Raviolli Footer" }]
}
{% endschema %}

{% javascript %}
  document.addEventListener('DOMContentLoaded', () => {
    const sections = document.querySelectorAll('.raviolli-footer');
    sections.forEach(section => {
      const id = section.dataset.sectionId;
      if (window.initBubbles) {
        window.initBubbles(`#section-${id}`);
      }
    });
  });
{% endjavascript %}
